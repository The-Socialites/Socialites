<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Account Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>
<h1>Account Information</h1>
<h2>Welcome, <span th:text="${name}">User</span>!</h2>
<p>You have successfully logged in.</p>
<form th:action="@{/logout}" method="post">
    <button type="submit">Logout</button>
</form>
<div class="container mx-auto p-8">
    <h1 class="text-4xl font-bold mb-8 text-center">Account Information</h1>

    <!-- Flash Messages -->
    <div th:if="${message}" th:text="${message}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" id="flashMessage"></div>
    <div th:if="${error}" th:text="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" id="flashMessage"></div>

    <form th:action="@{/account}" th:object="${user}" method="post" class="bg-white p-6 rounded-lg shadow-md max-w-lg mx-auto">
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Username:</label>
            <input type="text" th:field="*{username}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
            <input type="email" th:field="*{email}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">Language:</label>
            <input type="text" th:field="*{language}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2">City:</label>
            <input type="text" th:field="*{city}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />
        </div>
        <div class="flex items-center justify-between">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                Update
            </button>

            <a href="/account/password" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                Change Password
            </a>
        </div>
    </form>
</div>

<script>
    // Hide the flash message after 5 seconds
    document.addEventListener("DOMContentLoaded", function() {
        var flashMessage = document.getElementById("flashMessage");
        if (flashMessage) {
            setTimeout(function() {
                flashMessage.style.display = "none";
            }, 5000); // 5000 milliseconds = 5 seconds
        }
    });
</script>
</body>
</html>
